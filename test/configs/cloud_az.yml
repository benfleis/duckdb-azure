az_storage_account: &account duckdblabstestdatablob
az_data_root: common/azure_data
az_data_dir: &data_dir az://duckdblabs-data/common/azure_data
az_temp_dir_base: &temp_base az://duckdblabs-write-testing/extension/azure

az: &az_env
  AZURE_STORAGE_ACCOUNT: *account
  DATA_DIR: *data_dir
  TEMP_DIR_BASE: *temp_base

env:
  <<: *az_env

# NOTE: intent: in a fully functioning mustache setup this can also be a partial/file 
# instead of data, also allowing direct use of abfss_storage_account instead of $ENV
az_authn__standard: &authn_std |
  require-env AZURE_STORAGE_ACCOUNT

  statement ok
  CREATE OR REPLACE SECRET az_authn (
      TYPE AZURE,
      PROVIDER CREDENTIAL_CHAIN,
      ACCOUNT_NAME '${AZURE_STORAGE_ACCOUNT}'
  );

az_authn__cli_only: &authn_cli |
  require-env AZURE_STORAGE_ACCOUNT

  statement ok
  CREATE OR REPLACE SECRET az_authn (
      TYPE AZURE,
      PROVIDER CREDENTIAL_CHAIN,
      CHAIN 'cli',
      ACCOUNT_NAME '${AZURE_STORAGE_ACCOUNT}'
  );

azure_authn: *authn_std
  
